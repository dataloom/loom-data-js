/*
 * @flow
 */

declare module "lattice" {

  declare export type LatticeConfig = {
    authToken ? :string;
    baseUrl :string;
  };

  declare function configure(config :LatticeConfig) :void;

  declare export type UUID = string;

  declare export type FQN = FullyQualifiedName;

  declare export type FQNObject = {|
    namespace :string;
    name :string;
  |};

  declare export class FullyQualifiedName {
    static isValid :(...args :any[]) => boolean;
    static toString :(...args :any[]) => string;
    namespace :string;
    name :string;
    constructor(namespace :string, name :string) :FullyQualifiedName;
    constructor(fqn :FullyQualifiedName) :FullyQualifiedName;
    constructor(fqn :FQNObject) :FullyQualifiedName;
    constructor(fqn :string) :FullyQualifiedName;
    constructor(fqn :Map<string, string>) :FullyQualifiedName;
    getNamespace() :string;
    getName() :string;
    toObject() :FQNObject;
    toString() :string;
    valueOf() :string;
  }

  declare export type PropertyTypeObject = {|
    analyzer ?:AnalyzerType;
    datatype :string;
    description ?:string;
    id ?:UUID;
    piiField ?:boolean;
    schemas :FQNObject[];
    title :string;
    type :FQNObject;
  |};

  declare export class PropertyType {
    analyzer :?AnalyzerType;
    datatype :string;
    description :?string;
    id :?UUID;
    piiField :?boolean;
    schemas :FQN[];
    title :string;
    type :FQN;
    toImmutable() :Map<*, *>;
    toObject() :PropertyTypeObject;
    valueOf() :string;
  }

  declare export class PropertyTypeBuilder {
    build() :PropertyType;
    setAnalyzer(analyzer :?AnalyzerType) :PropertyTypeBuilder;
    setDataType(datatype :string) :PropertyTypeBuilder;
    setDescription(description :?string) :PropertyTypeBuilder;
    setId(propertyTypeId :?UUID) :PropertyTypeBuilder;
    setPii(pii :?boolean) :PropertyTypeBuilder;
    setSchemas(schemas :FQN[]) :PropertyTypeBuilder;
    setTitle(title :string) :PropertyTypeBuilder;
    setType(propertyTypeFQN :FQN) :PropertyTypeBuilder;
  }

  declare export type AnalyzerTypes = {|
    METAPHONE :'METAPHONE';
    STANDARD :'STANDARD';
  |};

  declare export type AnalyzerType = $Values<AnalyzerTypes>;

  declare export var Models :{
    FullyQualifiedName :typeof FullyQualifiedName,
    PropertyType :typeof PropertyType,
    PropertyTypeBuilder :typeof PropertyTypeBuilder,
  };

  declare export var Types :{
    AnalyzerType :AnalyzerType,
    AnalyzerTypes :AnalyzerTypes,
  };

  declare export default {
    Models: typeof Models,
    Types: typeof Types,
    configure: typeof configure,
  };
};
